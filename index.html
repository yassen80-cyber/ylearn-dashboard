<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ألعاب الأسئلة المتنوعة + شات واتساب</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body {font-family: Arial, sans-serif; background:#f0f0f0; margin:0; padding:0; text-align:center;}
  h1 {background:#4caf50; color:#fff; margin:0; padding:15px;}
  #gameList {display:flex; flex-wrap:wrap; justify-content:center; gap:10px; padding:10px;}
  .game-btn {
    background:#fff; border-radius:10px; padding:15px 25px; font-size:18px; cursor:pointer; width:130px;
    box-shadow:0 2px 6px rgba(0,0,0,0.15); user-select:none;
  }
  .game-btn:hover {background:#81c784; color:#fff;}

  /* شاشة اللعبة */
  #quizContainer {
    max-width: 600px;
    margin: 20px auto;
    background:#fff;
    padding:20px;
    border-radius:15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    text-align:right;
    display:none;
  }
  #quizContainer h2 {
    margin-top: 0;
  }
  .question {
    font-size: 20px;
    margin-bottom: 15px;
  }
  .options {
    list-style: none;
    padding: 0;
  }
  .options li {
    background: #f1f1f1;
    margin: 8px 0;
    padding: 12px 15px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 18px;
    user-select:none;
  }
  .options li.correct {
    background-color: #a8e6a1; /* أخضر */
  }
  .options li.wrong {
    background-color: #f49a9a; /* أحمر */
  }
  #nextBtn, #backBtn, #returnBtn {
    background: #4caf50;
    border: none;
    color: white;
    padding: 12px 30px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
    margin: 10px 5px 0 5px;
  }
  #nextBtn:disabled {
    background: #9ccc9c;
    cursor: default;
  }
  #backBtn, #returnBtn {
    background: #777;
  }
  #score {
    font-size: 22px;
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>ألعاب الأسئلة المتنوعة</h1>
<div id="gameList"></div>

<div id="quizContainer">
  <h2 id="quizTitle"></h2>
  <div id="questionText" class="question"></div>
  <ul id="optionsList" class="options"></ul>
  <button id="nextBtn" disabled>السؤال التالي</button>
  <button id="returnBtn" style="display:none;">رجوع للألعاب</button>
  <div id="score"></div>
</div>

<script>
// دالة لخلط مصفوفة (للتوزيع العشوائي)
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// بيانات الألعاب مع الأسئلة مع توزيع الإجابات الصحيحة عشوائيًا
const rawGames = [
  {
    title: "لعبة 1 - معلومات عامة",
    questions: [
      {q:"ما هي عاصمة مصر؟", options:["القاهرة", "الإسكندرية", "الجيزة", "الأقصر"], answer:0},
      {q:"ما هو أطول نهر في العالم؟", options:["النيل", "الأمازون", "الدانوب", "الميزيسيبي"], answer:0},
      {q:"ما هو أكبر محيط في العالم؟", options:["المحيط الأطلسي", "المحيط الهندي", "المحيط الهادئ", "المحيط المتجمد"], answer:2},
    ]
  },
  {
    title: "لعبة 2 - الرياضيات",
    questions: [
      {q:"ما هو ناتج 5 × 6؟", options:["30", "56", "11", "25"], answer:0},
      {q:"كم يساوي الجذر التربيعي لـ 49؟", options:["7", "8", "6", "9"], answer:0},
      {q:"ما هو العدد الأولي؟", options:["عدد يقبل القسمة على نفسه فقط", "عدد يقبل القسمة على 1 و2", "عدد زوجي", "عدد فردي"], answer:0},
    ]
  },
  {
    title: "لعبة 3 - اللغة العربية",
    questions: [
      {q:"ما جمع كلمة 'كتاب'؟", options:["كتب", "كتابة", "كتبان", "كتوبي"], answer:0},
      {q:"ما معنى كلمة 'سريع'؟", options:["بطيء", "عاجل", "متأخر", "ضعيف"], answer:1},
      {q:"ما هو الفعل المضارع من 'كتب'؟", options:["يكتب", "كتب", "كتبوا", "كتابة"], answer:0},
    ]
  },
  {
    title: "لعبة 4 - العلوم",
    questions: [
      {q:"ما هو الغاز الذي نتنفسه؟", options:["الأكسجين", "الهيدروجين", "النيتروجين", "الهيليوم"], answer:0},
      {q:"ما هو الكوكب الأحمر؟", options:["المريخ", "الزهرة", "المشتري", "زحل"], answer:0},
      {q:"ما هي وحدة قياس التيار الكهربائي؟", options:["أمبير", "فولت", "واط", "أوم"], answer:0},
    ]
  },
  {
    title: "لعبة 5 - تاريخ",
    questions: [
      {q:"من هو مؤسس الدولة الإسلامية؟", options:["محمد صلى الله عليه وسلم", "عمر بن الخطاب", "أبو بكر الصديق", "عثمان بن عفان"], answer:0},
      {q:"في أي سنة وقعت معركة بدر؟", options:["2 هـ", "5 هـ", "1 هـ", "10 هـ"], answer:0},
      {q:"من كان أول خليفة في الإسلام؟", options:["أبو بكر الصديق", "عمر بن الخطاب", "عثمان بن عفان", "علي بن أبي طالب"], answer:0},
    ]
  },
  {
    title: "لعبة 6 - أحياء",
    questions: [
      {q:"ما هو أكبر عضو في جسم الإنسان؟", options:["الكبد", "القلب", "الدماغ", "الرئة"], answer:0},
      {q:"ما هو الحيوان الذي يطير؟", options:["العصفور", "السمكة", "الثعبان", "الكلب"], answer:0},
      {q:"ما هو العضو المسؤول عن ضخ الدم؟", options:["القلب", "الرئة", "الكبد", "المعدة"], answer:0},
    ]
  },
  {
    title: "لعبة 7 - جغرافيا",
    questions: [
      {q:"ما هو أكبر قارة في العالم؟", options:["آسيا", "أفريقيا", "أوروبا", "أمريكا"], answer:0},
      {q:"في أي دولة توجد الأهرامات؟", options:["مصر", "السودان", "ليبيا", "المغرب"], answer:0},
      {q:"ما هي عاصمة فرنسا؟", options:["باريس", "روما", "مدريد", "لندن"], answer:0},
    ]
  },
  {
    title: "لعبة 8 - تقنية",
    questions: [
      {q:"ما هو HTML؟", options:["لغة ترميز صفحات ويب", "نظام تشغيل", "متصفح إنترنت", "معالج"], answer:0},
      {q:"ما معنى CPU؟", options:["وحدة المعالجة المركزية", "الذاكرة", "كارت الشاشة", "مزود الطاقة"], answer:0},
      {q:"ما هو نظام تشغيل مفتوح المصدر؟", options:["لينكس", "ويندوز", "ماك", "أندرويد"], answer:0},
    ]
  },
  {
    title: "لعبة 9 - رياضة",
    questions: [
      {q:"كم عدد اللاعبين في فريق كرة القدم؟", options:["11", "9", "7", "15"], answer:0},
      {q:"ما هو عدد أشواط مباراة كرة القدم؟", options:["2", "3", "4", "1"], answer:0},
      {q:"ما هو لون البطاقة التي تُعطي للطرد؟", options:["حمراء", "صفراء", "خضراء", "زرقاء"], answer:0},
    ]
  },
  {
    title: "لعبة 10 - فلك",
    questions: [
      {q:"ما هو أكبر كوكب في النظام الشمسي؟", options:["المشتري", "زحل", "أورانوس", "نبتون"], answer:0},
      {q:"ما هو الكوكب الأقرب إلى الشمس؟", options:["عطارد", "الزهرة", "الأرض", "المريخ"], answer:0},
      {q:"ما هي المجموعة الشمسية؟", options:["النظام الذي يضم الشمس والكواكب", "مجرة درب التبانة", "الكون", "نظام القمر"], answer:0},
    ]
  },
  {
    title: "لعبة 11 - ثقافة عامة",
    questions: [
      {q:"ما هي لغة اليابان الرسمية؟", options:["اليابانية", "الإنجليزية", "الصينية", "الكورية"], answer:0},
      {q:"ما هو رمز السلام العالمي؟", options:["حمامة بيضاء", "نسر", "أسد", "صليب"], answer:0},
      {q:"من هو مؤلف كتاب 'الأمير'؟", options:["نيكولو مكيافيلي", "شكسبير", "تولستوي", "دستويفسكي"], answer:0},
    ]
  },
  {
    title: "لعبة 12 - موسيقى",
    questions: [
      {q:"ما هي الأداة الموسيقية التي تعزف بالأوتار؟", options:["القيثارة", "الطبول", "الناي", "الكمان"], answer:3},
      {q:"ما هو اسم النغمة الموسيقية الأساسية؟", options:["دو", "ري", "مي", "فا"], answer:0},
      {q:"ما هو نوع الموسيقى الشعبية في مصر؟", options:["المواويل", "الجاز", "الروك", "الكلاسيكي"], answer:0},
    ]
  },
  {
    title: "لعبة 13 - دينية",
    questions: [
      // هنا لا نعرض أسئلة، عند الضغط على هذه اللعبة ننتقل إلى chat.html
    ]
  },
  {
    title: "لعبة 14 - لغات برمجة",
    questions: [
      {q:"ما هي لغة البرمجة التي تُستخدم لتصميم صفحات الويب؟", options:["HTML", "Python", "Java", "C++"], answer:0},
      {q:"ما هو إطار العمل الشهير لـ JavaScript؟", options:["React", "Laravel", "Django", "Flask"], answer:0},
      {q:"ما لغة البرمجة التي تبدأ بـ 'P' وتُستخدم في علم البيانات؟", options:["Python", "PHP", "Perl", "Pascal"], answer:0},
    ]
  },
  {
    title: "لعبة 15 - أفلام",
    questions: [
      {q:"من هو المخرج الشهير لفيلم 'تيتانيك'؟", options:["جيمس كاميرون", "ستيفن سبيلبرغ", "كريستوفر نولان", "مارتن سكورسيزي"], answer:0},
      {q:"ما هو فيلم الأنيميشن الذي يضم شخصية 'موآنا'؟", options:["موآنا", "فروزن", "رابونزل", "علاء الدين"], answer:0},
      {q:"ما هي سلسلة أفلام 'هاري بوتر'؟", options:["سلسلة أفلام عن السحر", "أفلام رعب", "أفلام كوميدية", "أفلام تاريخية"], answer:0},
    ]
  },
];

// توزيع عشوائي للإجابات في كل سؤال (ما عدا لعبة 13 لأنها خاصة)
rawGames.forEach((game, idx) => {
  if (idx !== 12) { // تجاهل لعبة 13 (الشات)
    game.questions.forEach(q => {
      // خلط الخيارات مع تعديل رقم الإجابة الصحيحة
      let correctOption = q.options[q.answer];
      let shuffledOptions = shuffleArray([...q.options]);
      q.answer = shuffledOptions.indexOf(correctOption);
      q.options = shuffledOptions;
    });
  }
});

// إنشاء أزرار الألعاب في الصفحة الرئيسية
const gameList = document.getElementById("gameList");
rawGames.forEach((game, index) => {
  const btn = document.createElement("button");
  btn.className = "game-btn";
  btn.textContent = game.title;
  btn.onclick = () => {
    if(index === 12){ 
      // لعبة 13: تحويل لصفحة chat.html مباشرة
      window.location.href = "chat.html";
      return;
    }
    startGame(index);
  };
  gameList.appendChild(btn);
});

const quizContainer = document.getElementById("quizContainer");
const quizTitle = document.getElementById("quizTitle");
const questionText = document.getElementById("questionText");
const optionsList = document.getElementById("optionsList");
const nextBtn = document.getElementById("nextBtn");
const returnBtn = document.getElementById("returnBtn");
const scoreDiv = document.getElementById("score");

let currentGame = null;
let currentQuestionIndex = 0;
let score = 0;
let answered = false;

function startGame(gameIndex) {
  currentGame = rawGames[gameIndex];
  currentQuestionIndex = 0;
  score = 0;
  gameList.style.display = "none";
  quizContainer.style.display = "block";
  returnBtn.style.display = "inline-block";
  scoreDiv.textContent = "";
  quizTitle.textContent = currentGame.title;
  showQuestion();
}

function showQuestion() {
  answered = false;
  nextBtn.disabled = true;
  scoreDiv.textContent = "";
  const question = currentGame.questions[currentQuestionIndex];
  questionText.textContent = `السؤال ${currentQuestionIndex + 1}: ${question.q}`;
  optionsList.innerHTML = "";
  question.options.forEach((option, i) => {
    const li = document.createElement("li");
    li.textContent = option;
    li.onclick = () => selectOption(li, i);
    optionsList.appendChild(li);
  });
}

function selectOption(li, selectedIndex) {
  if (answered) return; // لمنع إعادة الاختيار
  answered = true;
  nextBtn.disabled = false;

  const question = currentGame.questions[currentQuestionIndex];
  if (selectedIndex === question.answer) {
    li.classList.add("correct");
    score++;
  } else {
    li.classList.add("wrong");
    // اظهار الإجابة الصحيحة
    optionsList.children[question.answer].classList.add("correct");
  }
}

nextBtn.onclick = () => {
  currentQuestionIndex++;
  if (currentQuestionIndex < currentGame.questions.length) {
    showQuestion();
  } else {
    showScore();
  }
};

returnBtn.onclick = () => {
  quizContainer.style.display = "none";
  gameList.style.display = "flex";
  scoreDiv.textContent = "";
  nextBtn.disabled = true;
};

function showScore() {
  questionText.textContent = "";
  optionsList.innerHTML = "";
  quizTitle.textContent = currentGame.title;
  scoreDiv.textContent = `لقد أجبت بشكل صحيح على ${score} من ${currentGame.questions.length} أسئلة.`;
  nextBtn.disabled = true;
  nextBtn.style.display = "none";
}

</script>

</body>
</html>